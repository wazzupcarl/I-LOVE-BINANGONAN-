document.addEventListener('DOMContentLoaded', () => {
    const mainModal = document.getElementById("myModal"),
          modalTitle = document.getElementById("modalTitle"),
          modalDesc = document.getElementById("modalDesc"),
          closeModalIcon = document.querySelector(".close-icon"),
          okButton = document.querySelector(".modal-ok-btn"),
          mainNav = document.getElementById("navbar"),
          menuButton = document.querySelector(".menu-btn"),
          navContainer = document.querySelector(".nav__links"),
          allNavLinks = document.querySelectorAll(".nav__links .link");


    const openModal = (title, desc) => {
        modalTitle.innerText = title;
        modalDesc.innerText = desc;
        mainModal.style.display = "flex";
    };


    const closeModal = () => mainModal.style.display = "none";


    // Event listeners for opening modal on button or card click
    document.querySelectorAll("#readMoreBtn, .country__card").forEach(el => {
        el.addEventListener("click", evt => {
            evt.preventDefault();
            openModal(el.dataset.title, el.dataset.desc);
        });
    });


    // Event listeners for closing modal
    closeModalIcon.addEventListener("click", closeModal);
    okButton.addEventListener("click", closeModal);
    window.addEventListener("click", e => { if (e.target === mainModal) closeModal(); });


    // Navbar scroll effect
    window.addEventListener("scroll", () => {
        if(mainNav) mainNav.classList.toggle("nav--scrolled", window.scrollY > 20);
    });


    // Mobile menu toggle
    if(menuButton && navContainer){
        menuButton.addEventListener("click", () => {
            const isOpen = navContainer.classList.toggle("show");
            menuButton.classList.toggle("open");
            menuButton.innerHTML = isOpen ? `<i class="ri-close-line"></i>` : `<i class="ri-menu-line"></i>`;
        });
    }


    // Navigation links smooth scroll and active state
    allNavLinks.forEach(link => {
        link.addEventListener("click", () => {
            const target = document.getElementById(link.dataset.scroll);
            
            // Close mobile menu
            if(navContainer) navContainer.classList.remove("show");
            if(menuButton) {
                menuButton.classList.remove("open");
                menuButton.innerHTML = `<i class="ri-menu-line"></i>`;
            }
            
            // Set active class
            allNavLinks.forEach(l => l.classList.remove("active"));
            link.classList.add("active");
            
            // Smooth scroll
            if(target) target.scrollIntoView({ behavior: "smooth" });
        });
    });
});